var q=Object.defineProperty,I=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var y=(r,n,a)=>n in r?q(r,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[n]=a,j=(r,n)=>{for(var a in n||(n={}))F.call(n,a)&&y(r,a,n[a]);if(N)for(var a of N(n))L.call(n,a)&&y(r,a,n[a]);return r},v=(r,n)=>I(r,k(n));var C=(r,n,a)=>new Promise((w,t)=>{var o=i=>{try{d(a.next(i))}catch(l){t(l)}},x=i=>{try{d(a.throw(i))}catch(l){t(l)}},d=i=>i.done?w(i.value):Promise.resolve(i.value).then(o,x);d((a=a.apply(r,n)).next())});import{j as e}from"./ui-vendor.js";import{r as c}from"./react-vendor.js";import{B as f}from"./button.js";import{I as b}from"./input.js";import{L as g}from"./label.js";import{g as M}from"./api2.js";import{d as u}from"./db.js";import"./index.js";import"./query.js";const K=()=>{const[r,n]=c.useState([]),[a,w]=c.useState([]),[t,o]=c.useState({}),[x,d]=c.useState(!1),[i,l]=c.useState(null);c.useEffect(()=>{u.getCoaches().then(n),M().then(w)},[]);const h=s=>{o(v(j({},t),{[s.target.name]:s.target.value}))},S=s=>{var p,m;o({name:s.name,age:((p=s.age)==null?void 0:p.toString())||"",experience:((m=s.experience)==null?void 0:m.toString())||"",photo:s.photo||"",team_id:s.team_id||""}),l(s.id),d(!0)},E=s=>C(void 0,null,function*(){window.confirm("Удалить этого тренера?")&&(yield u.deleteCoach(s),n(yield u.getCoaches()))}),_=s=>C(void 0,null,function*(){s.preventDefault(),!(!t.name||!t.team_id||!t.age||!t.experience)&&(i?yield u.updateCoach(i,v(j({},t),{age:Number(t.age),experience:Number(t.experience)})):yield u.createCoach(v(j({},t),{age:Number(t.age),experience:Number(t.experience)})),n(yield u.getCoaches()),d(!1),o({}),l(null))});return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Тренера2"}),e.jsx(f,{onClick:()=>{d(!x),o({}),l(null)},className:"mb-4",children:x?"Отмена":"Добавить тренера"}),x&&e.jsxs("form",{onSubmit:_,className:"mb-6 space-y-4 bg-white p-4 rounded shadow",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Имя"}),e.jsx(b,{name:"name",value:t.name||"",onChange:h,required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Возраст"}),e.jsx(b,{name:"age",type:"number",min:"0",pattern:"[0-9]*",inputMode:"numeric",value:t.age||"",onChange:h,required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Опыт (лет)"}),e.jsx(b,{name:"experience",type:"number",min:"0",pattern:"[0-9]*",inputMode:"numeric",value:t.experience||"",onChange:h,required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Фото (URL)"}),e.jsx(b,{name:"photo",value:t.photo||"",onChange:h}),t.photo&&e.jsx("img",{src:t.photo,alt:"preview",className:"w-24 h-24 object-cover rounded mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Команда"}),e.jsxs("select",{name:"team_id",value:t.team_id||"",onChange:h,required:!0,className:"w-full border rounded p-2",children:[e.jsx("option",{value:"",children:"Выберите команду"}),a.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx(f,{type:"submit",children:"Сохранить"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(s=>{var p;return e.jsxs("div",{className:"bg-white rounded shadow p-4 flex flex-col items-center",children:[e.jsx("img",{src:s.photo,alt:s.name,className:"w-24 h-24 object-cover rounded-full mb-2",onError:m=>m.currentTarget.style.display="none"}),e.jsx("div",{className:"font-bold text-lg",children:s.name}),e.jsxs("div",{className:"text-gray-500",children:["Возраст: ",s.age||"—"]}),e.jsxs("div",{className:"text-gray-500",children:["Опыт: ",s.experience||"—"," лет"]}),e.jsxs("div",{className:"text-gray-500",children:["Команда: ",((p=a.find(m=>m.id===s.team_id))==null?void 0:p.name)||"—"]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(f,{size:"sm",variant:"outline",onClick:()=>S(s),children:"Редактировать"}),e.jsx(f,{size:"sm",variant:"destructive",onClick:()=>E(s.id),children:"Удалить"})]})]},s.id)})})]})};export{K as default};
//# sourceMappingURL=Coaches2Management.js.map
