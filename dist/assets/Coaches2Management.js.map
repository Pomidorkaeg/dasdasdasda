{"version":3,"file":"Coaches2Management.js","sources":["../../src/pages/admin/Coaches2Management.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Coach } from '@/types/coach';\nimport { getTeams } from '@/api/api';\nimport { db } from '@/lib/db';\n\nconst Coaches2Management: React.FC = () => {\n  const [coaches, setCoaches] = useState<Coach[]>([]);\n  const [teams, setTeams] = useState<any[]>([]);\n  const [form, setForm] = useState<Partial<Coach>>({});\n  const [showForm, setShowForm] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n\n  useEffect(() => {\n    db.getCoaches().then(setCoaches);\n    getTeams().then(setTeams);\n  }, []);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleEdit = (coach: Coach) => {\n    setForm({\n      name: coach.name,\n      age: coach.age?.toString() || '',\n      experience: coach.experience?.toString() || '',\n      photo: coach.photo || '',\n      team_id: coach.team_id || '',\n    });\n    setEditingId(coach.id);\n    setShowForm(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (window.confirm('Удалить этого тренера?')) {\n      await db.deleteCoach(id);\n      setCoaches(await db.getCoaches());\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!form.name || !form.team_id || !form.age || !form.experience) return;\n    if (editingId) {\n      await db.updateCoach(editingId, {\n        ...form,\n        age: Number(form.age),\n        experience: Number(form.experience),\n      } as Coach);\n    } else {\n      await db.createCoach({\n        ...form,\n        age: Number(form.age),\n        experience: Number(form.experience),\n      } as Coach);\n    }\n    setCoaches(await db.getCoaches());\n    setShowForm(false);\n    setForm({});\n    setEditingId(null);\n  };\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-bold mb-4\">Тренера2</h2>\n      <Button onClick={() => { setShowForm(!showForm); setForm({}); setEditingId(null); }} className=\"mb-4\">{showForm ? 'Отмена' : 'Добавить тренера'}</Button>\n      {showForm && (\n        <form onSubmit={handleSubmit} className=\"mb-6 space-y-4 bg-white p-4 rounded shadow\">\n          <div>\n            <Label>Имя</Label>\n            <Input name=\"name\" value={form.name || ''} onChange={handleChange} required />\n          </div>\n          <div>\n            <Label>Возраст</Label>\n            <Input name=\"age\" type=\"number\" min=\"0\" pattern=\"[0-9]*\" inputMode=\"numeric\" value={form.age || ''} onChange={handleChange} required />\n          </div>\n          <div>\n            <Label>Опыт (лет)</Label>\n            <Input name=\"experience\" type=\"number\" min=\"0\" pattern=\"[0-9]*\" inputMode=\"numeric\" value={form.experience || ''} onChange={handleChange} required />\n          </div>\n          <div>\n            <Label>Фото (URL)</Label>\n            <Input name=\"photo\" value={form.photo || ''} onChange={handleChange} />\n            {form.photo && <img src={form.photo} alt=\"preview\" className=\"w-24 h-24 object-cover rounded mt-2\" />}\n          </div>\n          <div>\n            <Label>Команда</Label>\n            <select name=\"team_id\" value={form.team_id || ''} onChange={handleChange} required className=\"w-full border rounded p-2\">\n              <option value=\"\">Выберите команду</option>\n              {teams.map(team => (\n                <option key={team.id} value={team.id}>{team.name}</option>\n              ))}\n            </select>\n          </div>\n          <Button type=\"submit\">Сохранить</Button>\n        </form>\n      )}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {coaches.map(coach => (\n          <div key={coach.id} className=\"bg-white rounded shadow p-4 flex flex-col items-center\">\n            <img src={coach.photo} alt={coach.name} className=\"w-24 h-24 object-cover rounded-full mb-2\" onError={e => (e.currentTarget.style.display = 'none')} />\n            <div className=\"font-bold text-lg\">{coach.name}</div>\n            <div className=\"text-gray-500\">Возраст: {coach.age || '—'}</div>\n            <div className=\"text-gray-500\">Опыт: {coach.experience || '—'} лет</div>\n            <div className=\"text-gray-500\">Команда: {teams.find(t => t.id === coach.team_id)?.name || '—'}</div>\n            <div className=\"flex gap-2 mt-2\">\n              <Button size=\"sm\" variant=\"outline\" onClick={() => handleEdit(coach)}>Редактировать</Button>\n              <Button size=\"sm\" variant=\"destructive\" onClick={() => handleDelete(coach.id)}>Удалить</Button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Coaches2Management; "],"names":["Coaches2Management","coaches","setCoaches","useState","teams","setTeams","form","setForm","showForm","setShowForm","editingId","setEditingId","useEffect","db","getTeams","handleChange","e","__spreadProps","__spreadValues","handleEdit","coach","_a","_b","handleDelete","id","__async","handleSubmit","jsx","Button","jsxs","Label","Input","team","t"],"mappings":"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"}