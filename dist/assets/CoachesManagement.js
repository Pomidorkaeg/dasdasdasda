var B=Object.defineProperty,D=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var T=(t,a,r)=>a in t?B(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,N=(t,a)=>{for(var r in a||(a={}))R.call(a,r)&&T(t,r,a[r]);if(S)for(var r of S(a))q.call(a,r)&&T(t,r,a[r]);return t},C=(t,a)=>D(t,P(a));var j=(t,a,r)=>new Promise((l,m)=>{var u=n=>{try{o(r.next(n))}catch(i){m(i)}},f=n=>{try{o(r.throw(n))}catch(i){m(i)}},o=n=>n.done?l(n.value):Promise.resolve(n.value).then(u,f);o((r=r.apply(t,a)).next())});import{j as e,X as M,s as z,B as A,t as G,h as J,w as O,u as Y,x as H}from"./ui-vendor.js";import{r as x,R as U,h as X}from"./react-vendor.js";import{B as y}from"./button.js";import{I as w}from"./input.js";import{L as v}from"./label.js";import{T as $}from"./textarea.js";import{d as h}from"./db.js";import{t as b}from"./index.js";import{C as K,a as Q,b as V}from"./card.js";import"./api2.js";import"./query.js";const W=({coach:t,onSave:a,onCancel:r})=>{const[l,m]=x.useState(N({},t)),[u,f]=x.useState([]);U.useEffect(()=>{j(void 0,null,function*(){const c=yield h.getTeams();f(c)})},[]);const o=i=>{const{name:c,value:g}=i.target;["experience"].includes(c)?m(C(N({},l),{[c]:parseInt(g,10)||0})):m(C(N({},l),{[c]:g}))},n=i=>{i.preventDefault(),a(l)};return e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"name",children:"ФИО тренера"}),e.jsx(w,{id:"name",name:"name",value:l.name,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"experience",children:"Опыт работы (лет)"}),e.jsx(w,{id:"experience",name:"experience",type:"number",value:l.experience,onChange:o,min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"team_id",children:"Команда"}),e.jsx("select",{id:"team_id",name:"team_id",value:l.team_id,onChange:o,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"photo",children:"URL фото"}),e.jsx(w,{id:"photo",name:"photo",value:l.photo||"",onChange:o}),l.photo&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:l.photo,alt:"Фото тренера",className:"w-32 h-32 object-cover rounded-full border",onError:i=>i.currentTarget.style.display="none"})})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"achievements",children:"Достижения"}),e.jsx($,{id:"achievements",name:"achievements",value:l.achievements||"",onChange:o,rows:4})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs(y,{variant:"outline",type:"button",onClick:r,children:[e.jsx(M,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(y,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(z,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})},k=[{id:"gudauta",name:"ФК Гудаута",shortName:"Гудаута",logo:"/lovable-uploads/9fd0afcb-f7b9-4726-ad0c-9637c412c9e9.png",primaryColor:"#2e7d32",secondaryColor:"#ffeb3b",description:"Команда «Гудаута» Новосибирск создана в 2008 г.р. Наша команда успешно участвует в региональных и городских турнирах, воспитывая молодых футболистов и показывая высокий уровень игры.",foundedYear:2008,stadium:"Стадион имени А.П. Соколова",achievements:["«Бронзовый» призёр Первенства России среди любительских команд 3 дивизиона. Зона «Сибирь». 1 лига","Чемпион города Новосибирска","Обладатель Кубка города Новосибирска","Обладатель Кубка Федерации футбола","Обладатель Кубка Победы","Неоднократный призёр Чемпионатов города Новосибирска и Новосибирской области"],coach:"Александр Иванов",address:"г. Новосибирск, ул. Спортивная, 15",socialLinks:{website:"https://fcgudauta.example.com",instagram:"https://instagram.com/fcgudauta",facebook:"https://facebook.com/fcgudauta"},backgroundImage:"/lovable-uploads/70205a26-8439-4152-8d6c-5c0c4d23ec34.png"},{id:"gudauta-school",name:"СШ Гудаута",shortName:"СШ Гудаута",logo:"/lovable-uploads/9fd0afcb-f7b9-4726-ad0c-9637c412c9e9.png",primaryColor:"#2e7d32",secondaryColor:"#ffeb3b",description:"Спортивная школа Гудаута - кузница молодых футбольных талантов, где юные спортсмены получают качественное футбольное образование. Наша миссия - выявлять и развивать молодых футболистов, прививая им не только спортивные навыки, но и важные жизненные ценности: трудолюбие, командный дух и стремление к самосовершенствованию.",foundedYear:2008,stadium:'Тренировочный центр "Молодёжный"',achievements:["Победитель юношеского первенства 2022",'Лауреат премии "Лучшая спортивная школа" 2021',"Участник международного юношеского турнира 2023"],coach:"Дмитрий Александрович Сидоров",address:"г. Новосибирск, ул. Молодёжная, 8",socialLinks:{website:"https://schoolgudauta.example.com",instagram:"https://instagram.com/schoolgudauta"},backgroundImage:"/lovable-uploads/70205a26-8439-4152-8d6c-5c0c4d23ec34.png"}],Z=()=>{try{const t=localStorage.getItem("teams");if(t)return JSON.parse(t)}catch(t){console.error("Failed to load teams from localStorage:",t)}try{localStorage.setItem("teams",JSON.stringify(k))}catch(t){console.error("Failed to save initial teams to localStorage:",t)}return k};let ee=Z();const se=t=>ee.find(a=>a.id===t),ue=()=>{const[t]=X(),a=t.get("team")||"gudauta",[r,l]=x.useState([]),[m,u]=x.useState(""),[f,o]=x.useState(!1),[n,i]=x.useState(null),c=se(a);x.useEffect(()=>{j(void 0,null,function*(){const d=yield h.getCoaches();l(d.filter(p=>p.team_id===a))})},[a]);const g=r.filter(s=>s.name.toLowerCase().includes(m.toLowerCase())),E=s=>{i(s),o(!0)},F=s=>j(void 0,null,function*(){if(window.confirm("Вы уверены, что хотите удалить этого тренера?"))try{yield h.deleteCoach(s);const d=yield h.getCoaches();l(d.filter(p=>p.team_id===a)),b({title:"Тренер удален",description:"Тренер был успешно удален из системы"})}catch(d){b({variant:"destructive",title:"Ошибка",description:"Не удалось удалить тренера"})}}),I=()=>{i({id:"",name:"",team_id:a,photo:"",nationality:"",age:void 0,experience:void 0,achievements:""}),o(!0)},_=s=>j(void 0,null,function*(){try{s.id?(yield h.updateCoach(s.id,s),b({title:"Тренер обновлен",description:"Информация о тренере успешно обновлена"})):(yield h.createCoach(s),b({title:"Тренер добавлен",description:"Новый тренер успешно добавлен в систему"}));const d=yield h.getCoaches();l(d.filter(p=>p.team_id===a)),o(!1),i(null)}catch(d){b({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить изменения"})}}),L=()=>{o(!1),i(null)};return e.jsxs("div",{children:[e.jsx(K,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(Q,{className:"flex flex-row items-center justify-between",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full mr-3 flex items-center justify-center",style:{backgroundColor:(c==null?void 0:c.primaryColor)||"#2e7d32"},children:e.jsx(A,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{children:["Управление тренерами: ",(c==null?void 0:c.name)||"Команда"]})]})}),e.jsxs(y,{onClick:I,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(G,{className:"mr-2 h-4 w-4"})," Добавить тренера"]})]})}),f&&n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-bold",children:n.id.includes("coach-")&&!r.some(s=>s.id===n.id)?"Добавить нового тренера":"Редактировать тренера"})}),e.jsx(W,{coach:n,onSave:_,onCancel:L})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(w,{className:"pl-10",placeholder:"Поиск тренеров по имени или должности...",value:m,onChange:s=>u(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[g.map(s=>e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm border border-gray-200 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"relative h-48 flex items-center justify-center bg-gray-100",children:[s.photo?e.jsx("img",{src:s.photo,alt:s.name,className:"w-32 h-32 object-cover rounded-full border shadow mx-auto mt-6",onError:d=>d.currentTarget.style.display="none"}):e.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-300 flex items-center justify-center text-gray-500 text-4xl mx-auto mt-6",children:"?"}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex flex-col items-center",children:e.jsx("h3",{className:"text-xl font-bold text-white drop-shadow",children:s.name})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(O,{className:"h-4 w-4 text-amber-500 mr-1"}),e.jsx("span",{className:"text-sm",children:s.experience?`${s.experience} лет опыта`:"Опыт не указан"})]}),s.nationality&&e.jsx("span",{className:"text-xs text-gray-400",children:s.nationality})]}),s.achievements&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:s.achievements}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-auto",children:[e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>E(s),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>F(s.id),className:"text-red-600 hover:text-red-900",children:e.jsx(H,{className:"h-4 w-4"})})]})]})]},s.id)),g.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"text-gray-500",children:"Тренеры не найдены. Добавьте первого тренера!"})})]})]})]})};export{ue as default};
//# sourceMappingURL=CoachesManagement.js.map
