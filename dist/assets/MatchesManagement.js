var Lt=Object.defineProperty,kt=Object.defineProperties;var Bt=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var Ve=(o,s,t)=>s in o?Lt(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,f=(o,s)=>{for(var t in s||(s={}))Fe.call(s,t)&&Ve(o,t,s[t]);if(ge)for(var t of ge(s))Ue.call(s,t)&&Ve(o,t,s[t]);return o},v=(o,s)=>kt(o,Bt(s));var w=(o,s)=>{var t={};for(var l in o)Fe.call(o,l)&&s.indexOf(l)<0&&(t[l]=o[l]);if(o!=null&&ge)for(var l of ge(o))s.indexOf(l)<0&&Ue.call(o,l)&&(t[l]=o[l]);return t};var ue=(o,s,t)=>new Promise((l,r)=>{var d=i=>{try{c(t.next(i))}catch(p){r(p)}},u=i=>{try{c(t.throw(i))}catch(p){r(p)}},c=i=>i.done?l(i.value):Promise.resolve(i.value).then(d,u);c((t=t.apply(o,s)).next())});import{y as Ge,z as We,j as e,E as Ht,G as Vt,H as Be,I as Ft,J as z,K as Z,O as k,Q as Ut,W as Wt,Y as D,Z as Kt,_ as $t,$ as zt,a0 as Gt,a1 as Yt,a2 as qt,i as Ye,a3 as Zt,a4 as Jt,t as Xt,u as Qt,v as eo}from"./ui-vendor.js";import{r as a,a as qe}from"./react-vendor.js";import{m as ve,t as to}from"./api2.js";import{B as pe}from"./button.js";import{I as fe}from"./input.js";import{h as oo,u as so,R as no,F as ro,D as ao,a as lo,b as io,c as co,d as uo}from"./dialog.js";import{c as A,u as po}from"./index.js";import"./query.js";function Ke(o,[s,t]){return Math.min(t,Math.max(s,o))}var fo=a.createContext(void 0);function ho(o){const s=a.useContext(fo);return o||s||"ltr"}function mo(o){const s=a.useRef({value:o,previous:o});return a.useMemo(()=>(s.current.value!==o&&(s.current.previous=s.current.value,s.current.value=o),s.current.previous),[o])}var xo=[" ","Enter","ArrowUp","ArrowDown"],go=[" ","Enter"],oe="Select",[we,ye,vo]=Ft(oe),[ce,ss]=Vt(oe,[vo,Ge]),be=Ge(),[So,J]=ce(oe),[wo,yo]=ce(oe),Ze=o=>{const{__scopeSelect:s,children:t,open:l,defaultOpen:r,onOpenChange:d,value:u,defaultValue:c,onValueChange:i,dir:p,name:g,autoComplete:C,disabled:y,required:I,form:P}=o,b=be(s),[n,S]=a.useState(null),[h,m]=a.useState(null),[T,_]=a.useState(!1),de=ho(p),[ne,M]=We({prop:l,defaultProp:r!=null?r:!1,onChange:d,caller:oe}),[V,Q]=We({prop:u,defaultProp:c,onChange:i,caller:oe}),re=a.useRef(null),B=n?P||!!n.closest("form"):!0,[G,ae]=a.useState(new Set),F=Array.from(G).map(O=>O.props.value).join(";");return e.jsx(Ht,v(f({},b),{children:e.jsxs(So,{required:I,scope:s,trigger:n,onTriggerChange:S,valueNode:h,onValueNodeChange:m,valueNodeHasChildren:T,onValueNodeHasChildrenChange:_,contentId:Be(),value:V,onValueChange:Q,open:ne,onOpenChange:M,dir:de,triggerPointerDownPosRef:re,disabled:y,children:[e.jsx(we.Provider,{scope:s,children:e.jsx(wo,{scope:o.__scopeSelect,onNativeOptionAdd:a.useCallback(O=>{ae(U=>new Set(U).add(O))},[]),onNativeOptionRemove:a.useCallback(O=>{ae(U=>{const W=new Set(U);return W.delete(O),W})},[]),children:t})}),B?e.jsxs(wt,{"aria-hidden":!0,required:I,tabIndex:-1,name:g,autoComplete:C,value:V,onChange:O=>Q(O.target.value),disabled:y,form:P,children:[V===void 0?e.jsx("option",{value:""}):null,Array.from(G)]},F):null]})}))};Ze.displayName=oe;var Je="SelectTrigger",Xe=a.forwardRef((o,s)=>{const b=o,{__scopeSelect:t,disabled:l=!1}=b,r=w(b,["__scopeSelect","disabled"]),d=be(t),u=J(Je,t),c=u.disabled||l,i=z(s,u.onTriggerChange),p=ye(t),g=a.useRef("touch"),[C,y,I]=bt(n=>{const S=p().filter(T=>!T.disabled),h=S.find(T=>T.value===u.value),m=Ct(S,n,h);m!==void 0&&u.onValueChange(m.value)}),P=n=>{c||(u.onOpenChange(!0),I()),n&&(u.triggerPointerDownPosRef.current={x:Math.round(n.pageX),y:Math.round(n.pageY)})};return e.jsx(Wt,v(f({asChild:!0},d),{children:e.jsx(k.button,v(f({type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":yt(u.value)?"":void 0},r),{ref:i,onClick:D(r.onClick,n=>{n.currentTarget.focus(),g.current!=="mouse"&&P(n)}),onPointerDown:D(r.onPointerDown,n=>{g.current=n.pointerType;const S=n.target;S.hasPointerCapture(n.pointerId)&&S.releasePointerCapture(n.pointerId),n.button===0&&n.ctrlKey===!1&&n.pointerType==="mouse"&&(P(n),n.preventDefault())}),onKeyDown:D(r.onKeyDown,n=>{const S=C.current!=="";!(n.ctrlKey||n.altKey||n.metaKey)&&n.key.length===1&&y(n.key),!(S&&n.key===" ")&&xo.includes(n.key)&&(P(),n.preventDefault())})}))}))});Xe.displayName=Je;var Qe="SelectValue",et=a.forwardRef((o,s)=>{const y=o,{__scopeSelect:t,className:l,style:r,children:d,placeholder:u=""}=y,c=w(y,["__scopeSelect","className","style","children","placeholder"]),i=J(Qe,t),{onValueNodeHasChildrenChange:p}=i,g=d!==void 0,C=z(s,i.onValueNodeChange);return Z(()=>{p(g)},[p,g]),e.jsx(k.span,v(f({},c),{ref:C,style:{pointerEvents:"none"},children:yt(i.value)?e.jsx(e.Fragment,{children:u}):d}))});et.displayName=Qe;var bo="SelectIcon",tt=a.forwardRef((o,s)=>{const d=o,{__scopeSelect:t,children:l}=d,r=w(d,["__scopeSelect","children"]);return e.jsx(k.span,v(f({"aria-hidden":!0},r),{ref:s,children:l||"▼"}))});tt.displayName=bo;var Co="SelectPortal",ot=o=>e.jsx(Kt,f({asChild:!0},o));ot.displayName=Co;var se="SelectContent",st=a.forwardRef((o,s)=>{const t=J(se,o.__scopeSelect),[l,r]=a.useState();if(Z(()=>{r(new DocumentFragment)},[]),!t.open){const d=l;return d?qe.createPortal(e.jsx(nt,{scope:o.__scopeSelect,children:e.jsx(we.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),d):null}return e.jsx(rt,v(f({},o),{ref:s}))});st.displayName=se;var H=10,[nt,X]=ce(se),jo="SelectContentImpl",No=zt("SelectContent.RemoveScroll"),rt=a.forwardRef((o,s)=>{const le=o,{__scopeSelect:t,position:l="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:d,onPointerDownOutside:u,side:c,sideOffset:i,align:p,alignOffset:g,arrowPadding:C,collisionBoundary:y,collisionPadding:I,sticky:P,hideWhenDetached:b,avoidCollisions:n}=le,S=w(le,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),h=J(se,t),[m,T]=a.useState(null),[_,de]=a.useState(null),ne=z(s,x=>T(x)),[M,V]=a.useState(null),[Q,re]=a.useState(null),B=ye(t),[G,ae]=a.useState(!1),F=a.useRef(!1);a.useEffect(()=>{if(m)return oo(m)},[m]),so();const O=a.useCallback(x=>{const[E,...L]=B().map(N=>N.ref.current),[R]=L.slice(-1),j=document.activeElement;for(const N of x)if(N===j||(N==null||N.scrollIntoView({block:"nearest"}),N===E&&_&&(_.scrollTop=0),N===R&&_&&(_.scrollTop=_.scrollHeight),N==null||N.focus(),document.activeElement!==j))return},[B,_]),U=a.useCallback(()=>O([M,m]),[O,M,m]);a.useEffect(()=>{G&&U()},[G,U]);const{onOpenChange:W,triggerPointerDownPosRef:ee}=h;a.useEffect(()=>{if(m){let x={x:0,y:0};const E=R=>{var j,N,K,$;x={x:Math.abs(Math.round(R.pageX)-((N=(j=ee.current)==null?void 0:j.x)!=null?N:0)),y:Math.abs(Math.round(R.pageY)-(($=(K=ee.current)==null?void 0:K.y)!=null?$:0))}},L=R=>{x.x<=10&&x.y<=10?R.preventDefault():m.contains(R.target)||W(!1),document.removeEventListener("pointermove",E),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",E),document.addEventListener("pointerup",L,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",L,{capture:!0})}}},[m,W,ee]),a.useEffect(()=>{const x=()=>W(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[W]);const[me,Ce]=bt(x=>{const E=B().filter(j=>!j.disabled),L=E.find(j=>j.ref.current===document.activeElement),R=Ct(E,x,L);R&&setTimeout(()=>R.ref.current.focus())}),xe=a.useCallback((x,E,L)=>{const R=!F.current&&!L;(h.value!==void 0&&h.value===E||R)&&(V(x),R&&(F.current=!0))},[h.value]),je=a.useCallback(()=>m==null?void 0:m.focus(),[m]),Ne=a.useCallback((x,E,L)=>{const R=!F.current&&!L;(h.value!==void 0&&h.value===E||R)&&re(x)},[h.value]),te=l==="popper"?Ee:at,Te=te===Ee?{side:c,sideOffset:i,align:p,alignOffset:g,arrowPadding:C,collisionBoundary:y,collisionPadding:I,sticky:P,hideWhenDetached:b,avoidCollisions:n}:{};return e.jsx(nt,{scope:t,content:m,viewport:_,onViewportChange:de,itemRefCallback:xe,selectedItem:M,onItemLeave:je,itemTextRefCallback:Ne,focusSelectedItem:U,selectedItemText:Q,position:l,isPositioned:G,searchRef:me,children:e.jsx(no,{as:No,allowPinchZoom:!0,children:e.jsx(ro,{asChild:!0,trapped:h.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:D(r,x=>{var E;(E=h.trigger)==null||E.focus({preventScroll:!0}),x.preventDefault()}),children:e.jsx(Gt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(te,v(f(f({role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:x=>x.preventDefault()},S),Te),{onPlaced:()=>ae(!0),ref:ne,style:f({display:"flex",flexDirection:"column",outline:"none"},S.style),onKeyDown:D(S.onKeyDown,x=>{const E=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!E&&x.key.length===1&&Ce(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let R=B().filter(j=>!j.disabled).map(j=>j.ref.current);if(["ArrowUp","End"].includes(x.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const j=x.target,N=R.indexOf(j);R=R.slice(N+1)}setTimeout(()=>O(R)),x.preventDefault()}})}))})})})})});rt.displayName=jo;var To="SelectItemAlignedPosition",at=a.forwardRef((o,s)=>{const ne=o,{__scopeSelect:t,onPlaced:l}=ne,r=w(ne,["__scopeSelect","onPlaced"]),d=J(se,t),u=X(se,t),[c,i]=a.useState(null),[p,g]=a.useState(null),C=z(s,M=>g(M)),y=ye(t),I=a.useRef(!1),P=a.useRef(!0),{viewport:b,selectedItem:n,selectedItemText:S,focusSelectedItem:h}=u,m=a.useCallback(()=>{if(d.trigger&&d.valueNode&&c&&p&&b&&n&&S){const M=d.trigger.getBoundingClientRect(),V=p.getBoundingClientRect(),Q=d.valueNode.getBoundingClientRect(),re=S.getBoundingClientRect();if(d.dir!=="rtl"){const j=re.left-V.left,N=Q.left-j,K=M.left-N,$=M.width+K,Ie=Math.max($,V.width),Re=window.innerWidth-H,Pe=Ke(N,[H,Math.max(H,Re-Ie)]);c.style.minWidth=$+"px",c.style.left=Pe+"px"}else{const j=V.right-re.right,N=window.innerWidth-Q.right-j,K=window.innerWidth-M.right-N,$=M.width+K,Ie=Math.max($,V.width),Re=window.innerWidth-H,Pe=Ke(N,[H,Math.max(H,Re-Ie)]);c.style.minWidth=$+"px",c.style.right=Pe+"px"}const B=y(),G=window.innerHeight-H*2,ae=b.scrollHeight,F=window.getComputedStyle(p),O=parseInt(F.borderTopWidth,10),U=parseInt(F.paddingTop,10),W=parseInt(F.borderBottomWidth,10),ee=parseInt(F.paddingBottom,10),me=O+U+ae+ee+W,Ce=Math.min(n.offsetHeight*5,me),xe=window.getComputedStyle(b),je=parseInt(xe.paddingTop,10),Ne=parseInt(xe.paddingBottom,10),te=M.top+M.height/2-H,Te=G-te,le=n.offsetHeight/2,x=n.offsetTop+le,E=O+U+x,L=me-E;if(E<=te){const j=B.length>0&&n===B[B.length-1].ref.current;c.style.bottom="0px";const N=p.clientHeight-b.offsetTop-b.offsetHeight,K=Math.max(Te,le+(j?Ne:0)+N+W),$=E+K;c.style.height=$+"px"}else{const j=B.length>0&&n===B[0].ref.current;c.style.top="0px";const K=Math.max(te,O+b.offsetTop+(j?je:0)+le)+L;c.style.height=K+"px",b.scrollTop=E-te+b.offsetTop}c.style.margin=`${H}px 0`,c.style.minHeight=Ce+"px",c.style.maxHeight=G+"px",l==null||l(),requestAnimationFrame(()=>I.current=!0)}},[y,d.trigger,d.valueNode,c,p,b,n,S,d.dir,l]);Z(()=>m(),[m]);const[T,_]=a.useState();Z(()=>{p&&_(window.getComputedStyle(p).zIndex)},[p]);const de=a.useCallback(M=>{M&&P.current===!0&&(m(),h==null||h(),P.current=!1)},[m,h]);return e.jsx(Ro,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:I,onScrollButtonChange:de,children:e.jsx("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:e.jsx(k.div,v(f({},r),{ref:C,style:f({boxSizing:"border-box",maxHeight:"100%"},r.style)}))})})});at.displayName=To;var Io="SelectPopperPosition",Ee=a.forwardRef((o,s)=>{const c=o,{__scopeSelect:t,align:l="start",collisionPadding:r=H}=c,d=w(c,["__scopeSelect","align","collisionPadding"]),u=be(t);return e.jsx(Yt,v(f(f({},u),d),{ref:s,align:l,collisionPadding:r,style:v(f({boxSizing:"border-box"},d.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Ee.displayName=Io;var[Ro,He]=ce(se,{}),_e="SelectViewport",lt=a.forwardRef((o,s)=>{const p=o,{__scopeSelect:t,nonce:l}=p,r=w(p,["__scopeSelect","nonce"]),d=X(_e,t),u=He(_e,t),c=z(s,d.onViewportChange),i=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(we.Slot,{scope:t,children:e.jsx(k.div,v(f({"data-radix-select-viewport":"",role:"presentation"},r),{ref:c,style:f({position:"relative",flex:1,overflow:"hidden auto"},r.style),onScroll:D(r.onScroll,g=>{const C=g.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:I}=u;if(I!=null&&I.current&&y){const P=Math.abs(i.current-C.scrollTop);if(P>0){const b=window.innerHeight-H*2,n=parseFloat(y.style.minHeight),S=parseFloat(y.style.height),h=Math.max(n,S);if(h<b){const m=h+P,T=Math.min(b,m),_=m-T;y.style.height=T+"px",y.style.bottom==="0px"&&(C.scrollTop=_>0?_:0,y.style.justifyContent="flex-end")}}}i.current=C.scrollTop})}))})]})});lt.displayName=_e;var it="SelectGroup",[Po,Eo]=ce(it),_o=a.forwardRef((o,s)=>{const d=o,{__scopeSelect:t}=d,l=w(d,["__scopeSelect"]),r=Be();return e.jsx(Po,{scope:t,id:r,children:e.jsx(k.div,v(f({role:"group","aria-labelledby":r},l),{ref:s}))})});_o.displayName=it;var ct="SelectLabel",dt=a.forwardRef((o,s)=>{const d=o,{__scopeSelect:t}=d,l=w(d,["__scopeSelect"]),r=Eo(ct,t);return e.jsx(k.div,v(f({id:r.id},l),{ref:s}))});dt.displayName=ct;var Se="SelectItem",[Do,ut]=ce(Se),pt=a.forwardRef((o,s)=>{const h=o,{__scopeSelect:t,value:l,disabled:r=!1,textValue:d}=h,u=w(h,["__scopeSelect","value","disabled","textValue"]),c=J(Se,t),i=X(Se,t),p=c.value===l,[g,C]=a.useState(d!=null?d:""),[y,I]=a.useState(!1),P=z(s,m=>{var T;return(T=i.itemRefCallback)==null?void 0:T.call(i,m,l,r)}),b=Be(),n=a.useRef("touch"),S=()=>{r||(c.onValueChange(l),c.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Do,{scope:t,value:l,disabled:r,textId:b,isSelected:p,onItemTextChange:a.useCallback(m=>{C(T=>{var _;return T||((_=m==null?void 0:m.textContent)!=null?_:"").trim()})},[]),children:e.jsx(we.ItemSlot,{scope:t,value:l,disabled:r,textValue:g,children:e.jsx(k.div,v(f({role:"option","aria-labelledby":b,"data-highlighted":y?"":void 0,"aria-selected":p&&y,"data-state":p?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},u),{ref:P,onFocus:D(u.onFocus,()=>I(!0)),onBlur:D(u.onBlur,()=>I(!1)),onClick:D(u.onClick,()=>{n.current!=="mouse"&&S()}),onPointerUp:D(u.onPointerUp,()=>{n.current==="mouse"&&S()}),onPointerDown:D(u.onPointerDown,m=>{n.current=m.pointerType}),onPointerMove:D(u.onPointerMove,m=>{var T;n.current=m.pointerType,r?(T=i.onItemLeave)==null||T.call(i):n.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:D(u.onPointerLeave,m=>{var T;m.currentTarget===document.activeElement&&((T=i.onItemLeave)==null||T.call(i))}),onKeyDown:D(u.onKeyDown,m=>{var _;((_=i.searchRef)==null?void 0:_.current)!==""&&m.key===" "||(go.includes(m.key)&&S(),m.key===" "&&m.preventDefault())})}))})})});pt.displayName=Se;var he="SelectItemText",ft=a.forwardRef((o,s)=>{const S=o,{__scopeSelect:t,className:l,style:r}=S,d=w(S,["__scopeSelect","className","style"]),u=J(he,t),c=X(he,t),i=ut(he,t),p=yo(he,t),[g,C]=a.useState(null),y=z(s,h=>C(h),i.onItemTextChange,h=>{var m;return(m=c.itemTextRefCallback)==null?void 0:m.call(c,h,i.value,i.disabled)}),I=g==null?void 0:g.textContent,P=a.useMemo(()=>e.jsx("option",{value:i.value,disabled:i.disabled,children:I},i.value),[i.disabled,i.value,I]),{onNativeOptionAdd:b,onNativeOptionRemove:n}=p;return Z(()=>(b(P),()=>n(P)),[b,n,P]),e.jsxs(e.Fragment,{children:[e.jsx(k.span,v(f({id:i.textId},d),{ref:y})),i.isSelected&&u.valueNode&&!u.valueNodeHasChildren?qe.createPortal(d.children,u.valueNode):null]})});ft.displayName=he;var ht="SelectItemIndicator",mt=a.forwardRef((o,s)=>{const d=o,{__scopeSelect:t}=d,l=w(d,["__scopeSelect"]);return ut(ht,t).isSelected?e.jsx(k.span,v(f({"aria-hidden":!0},l),{ref:s})):null});mt.displayName=ht;var De="SelectScrollUpButton",xt=a.forwardRef((o,s)=>{const t=X(De,o.__scopeSelect),l=He(De,o.__scopeSelect),[r,d]=a.useState(!1),u=z(s,l.onScrollButtonChange);return Z(()=>{if(t.viewport&&t.isPositioned){let c=function(){const p=i.scrollTop>0;d(p)};const i=t.viewport;return c(),i.addEventListener("scroll",c),()=>i.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),r?e.jsx(vt,v(f({},o),{ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:i}=t;c&&i&&(c.scrollTop=c.scrollTop-i.offsetHeight)}})):null});xt.displayName=De;var Me="SelectScrollDownButton",gt=a.forwardRef((o,s)=>{const t=X(Me,o.__scopeSelect),l=He(Me,o.__scopeSelect),[r,d]=a.useState(!1),u=z(s,l.onScrollButtonChange);return Z(()=>{if(t.viewport&&t.isPositioned){let c=function(){const p=i.scrollHeight-i.clientHeight,g=Math.ceil(i.scrollTop)<p;d(g)};const i=t.viewport;return c(),i.addEventListener("scroll",c),()=>i.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),r?e.jsx(vt,v(f({},o),{ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:i}=t;c&&i&&(c.scrollTop=c.scrollTop+i.offsetHeight)}})):null});gt.displayName=Me;var vt=a.forwardRef((o,s)=>{const p=o,{__scopeSelect:t,onAutoScroll:l}=p,r=w(p,["__scopeSelect","onAutoScroll"]),d=X("SelectScrollButton",t),u=a.useRef(null),c=ye(t),i=a.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return a.useEffect(()=>()=>i(),[i]),Z(()=>{var C;const g=c().find(y=>y.ref.current===document.activeElement);(C=g==null?void 0:g.ref.current)==null||C.scrollIntoView({block:"nearest"})},[c]),e.jsx(k.div,v(f({"aria-hidden":!0},r),{ref:s,style:f({flexShrink:0},r.style),onPointerDown:D(r.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(l,50))}),onPointerMove:D(r.onPointerMove,()=>{var g;(g=d.onItemLeave)==null||g.call(d),u.current===null&&(u.current=window.setInterval(l,50))}),onPointerLeave:D(r.onPointerLeave,()=>{i()})}))}),Mo="SelectSeparator",St=a.forwardRef((o,s)=>{const r=o,{__scopeSelect:t}=r,l=w(r,["__scopeSelect"]);return e.jsx(k.div,v(f({"aria-hidden":!0},l),{ref:s}))});St.displayName=Mo;var Ae="SelectArrow",Ao=a.forwardRef((o,s)=>{const c=o,{__scopeSelect:t}=c,l=w(c,["__scopeSelect"]),r=be(t),d=J(Ae,t),u=X(Ae,t);return d.open&&u.position==="popper"?e.jsx(qt,v(f(f({},r),l),{ref:s})):null});Ao.displayName=Ae;var Oo="SelectBubbleInput",wt=a.forwardRef((r,l)=>{var d=r,{__scopeSelect:o,value:s}=d,t=w(d,["__scopeSelect","value"]);const u=a.useRef(null),c=z(l,u),i=mo(s);return a.useEffect(()=>{const p=u.current;if(!p)return;const g=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(g,"value").set;if(i!==s&&y){const I=new Event("change",{bubbles:!0});y.call(p,s),p.dispatchEvent(I)}},[i,s]),e.jsx(k.select,v(f({},t),{style:f(f({},Ut),t.style),ref:c,defaultValue:s}))});wt.displayName=Oo;function yt(o){return o===""||o===void 0}function bt(o){const s=$t(o),t=a.useRef(""),l=a.useRef(0),r=a.useCallback(u=>{const c=t.current+u;s(c),function i(p){t.current=p,window.clearTimeout(l.current),p!==""&&(l.current=window.setTimeout(()=>i(""),1e3))}(c)},[s]),d=a.useCallback(()=>{t.current="",window.clearTimeout(l.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(l.current),[]),[t,r,d]}function Ct(o,s,t){const r=s.length>1&&Array.from(s).every(p=>p===s[0])?s[0]:s,d=t?o.indexOf(t):-1;let u=Lo(o,Math.max(d,0));r.length===1&&(u=u.filter(p=>p!==t));const i=u.find(p=>p.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==t?i:void 0}function Lo(o,s){return o.map((t,l)=>o[(s+l)%o.length])}var ko=Ze,jt=Xe,Bo=et,Ho=tt,Vo=ot,Nt=st,Fo=lt,Tt=dt,It=pt,Uo=ft,Wo=mt,Rt=xt,Pt=gt,Et=St;const $e=ko,ze=Bo,Oe=a.forwardRef((r,l)=>{var d=r,{className:o,children:s}=d,t=w(d,["className","children"]);return e.jsxs(jt,v(f({ref:l,className:A("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o)},t),{children:[s,e.jsx(Ho,{asChild:!0,children:e.jsx(Ye,{className:"h-4 w-4 opacity-50"})})]}))});Oe.displayName=jt.displayName;const _t=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx(Rt,v(f({ref:t,className:A("flex cursor-default items-center justify-center py-1",o)},s),{children:e.jsx(Jt,{className:"h-4 w-4"})}))});_t.displayName=Rt.displayName;const Dt=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx(Pt,v(f({ref:t,className:A("flex cursor-default items-center justify-center py-1",o)},s),{children:e.jsx(Ye,{className:"h-4 w-4"})}))});Dt.displayName=Pt.displayName;const Le=a.forwardRef((d,r)=>{var u=d,{className:o,children:s,position:t="popper"}=u,l=w(u,["className","children","position"]);return e.jsx(Vo,{children:e.jsxs(Nt,v(f({ref:r,className:A("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t},l),{children:[e.jsx(_t,{}),e.jsx(Fo,{className:A("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Dt,{})]}))})});Le.displayName=Nt.displayName;const Ko=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx(Tt,f({ref:t,className:A("py-1.5 pl-8 pr-2 text-sm font-semibold",o)},s))});Ko.displayName=Tt.displayName;const ie=a.forwardRef((r,l)=>{var d=r,{className:o,children:s}=d,t=w(d,["className","children"]);return e.jsxs(It,v(f({ref:l,className:A("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o)},t),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wo,{children:e.jsx(Zt,{className:"h-4 w-4"})})}),e.jsx(Uo,{children:s})]}))});ie.displayName=It.displayName;const $o=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx(Et,f({ref:t,className:A("-mx-1 my-1 h-px bg-muted",o)},s))});$o.displayName=Et.displayName;const Mt=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",f({ref:t,className:A("w-full caption-bottom text-sm",o)},s))})});Mt.displayName="Table";const At=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("thead",f({ref:t,className:A("[&_tr]:border-b",o)},s))});At.displayName="TableHeader";const Ot=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("tbody",f({ref:t,className:A("[&_tr:last-child]:border-0",o)},s))});Ot.displayName="TableBody";const zo=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("tfoot",f({ref:t,className:A("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",o)},s))});zo.displayName="TableFooter";const ke=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("tr",f({ref:t,className:A("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",o)},s))});ke.displayName="TableRow";const Y=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("th",f({ref:t,className:A("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",o)},s))});Y.displayName="TableHead";const q=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("td",f({ref:t,className:A("p-4 align-middle [&:has([role=checkbox])]:pr-0",o)},s))});q.displayName="TableCell";const Go=a.forwardRef((l,t)=>{var r=l,{className:o}=r,s=w(r,["className"]);return e.jsx("caption",f({ref:t,className:A("mt-4 text-sm text-muted-foreground",o)},s))});Go.displayName="TableCaption";const ns=()=>{const{toast:o}=po(),[s,t]=a.useState([]),[l,r]=a.useState([]),[d,u]=a.useState(!1),[c,i]=a.useState(null),[p,g]=a.useState({opponent:"",date:"",time:"",venue:"",competition:"",score:{home:0,away:0},status:"scheduled"});a.useEffect(()=>{C(),y()},[]);const C=()=>ue(void 0,null,function*(){try{const n=yield ve.getAll();if(n&&Array.isArray(n)){const S=n.map(h=>({id:h.id,date:h.date?new Date(h.date):new Date,time:h.startTime||"",opponent:h.opponent||"",venue:h.location||"",competition:h.competition||"",score:typeof h.score=="string"?JSON.parse(h.score):h.score||{home:0,away:0},status:h.status||"scheduled",stats:h.stats||{possession:0,shots:0,shotsOnTarget:0,corners:0,fouls:0,yellowCards:0,redCards:0},highlights:typeof h.highlights=="string"?JSON.parse(h.highlights):h.highlights||[],created_at:h.created_at,updated_at:h.updated_at}));t(S)}else t([]),console.error("Полученные данные не являются массивом:",n)}catch(n){console.error("Ошибка при загрузке матчей:",n),t([]),o({variant:"destructive",title:"Ошибка",description:"Ошибка при загрузке матчей"})}}),y=()=>ue(void 0,null,function*(){try{const n=yield to.getAll();n&&Array.isArray(n)?r(n):(r([]),console.error("Полученные данные не являются массивом:",n))}catch(n){console.error("Ошибка при загрузке команд:",n),r([]),o({variant:"destructive",title:"Ошибка",description:"Ошибка при загрузке команд"})}}),I=n=>ue(void 0,null,function*(){n.preventDefault();try{const S=v(f({},p),{date:new Date(p.date),score:p.score,highlights:[]});c?(yield ve.update(c.id,S),o({title:"Успех",description:"Матч успешно обновлен"})):(yield ve.create(S),o({title:"Успех",description:"Матч успешно создан"})),u(!1),i(null),g({opponent:"",date:"",time:"",venue:"",competition:"",score:{home:0,away:0},status:"scheduled"}),C()}catch(S){console.error("Error saving match:",S),o({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить матч"})}}),P=n=>{i(n),g({opponent:n.opponent,date:n.date.toISOString().split("T")[0],time:n.time,venue:n.venue,competition:n.competition||"",score:n.score,status:n.status}),u(!0)},b=n=>ue(void 0,null,function*(){try{yield ve.delete(n),o({title:"Успех",description:"Матч успешно удален"}),C()}catch(S){console.error("Error deleting match:",S),o({variant:"destructive",title:"Ошибка",description:"Не удалось удалить матч"})}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Управление матчами"}),e.jsxs(ao,{open:d,onOpenChange:u,children:[e.jsx(lo,{asChild:!0,children:e.jsxs(pe,{onClick:()=>u(!1),children:[e.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Добавить матч"]})}),e.jsxs(io,{children:[e.jsx(co,{children:e.jsx(uo,{children:c?"Редактировать матч":"Новый матч"})}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Хозяева"}),e.jsxs($e,{value:p.opponent,onValueChange:n=>g(v(f({},p),{opponent:n})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Выберите команду"})}),e.jsx(Le,{children:l.map(n=>e.jsx(ie,{value:n.name,children:n.name},n.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Дата матча"}),e.jsx(fe,{type:"date",value:p.date,onChange:n=>g(v(f({},p),{date:n.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Время матча"}),e.jsx(fe,{type:"time",value:p.time,onChange:n=>g(v(f({},p),{time:n.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Место проведения"}),e.jsx(fe,{value:p.venue,onChange:n=>g(v(f({},p),{venue:n.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Соревнование"}),e.jsx(fe,{value:p.competition,onChange:n=>g(v(f({},p),{competition:n.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Счет"}),e.jsx(fe,{type:"text",value:`${p.score.home} - ${p.score.away}`,onChange:n=>g(v(f({},p),{score:{home:parseInt(n.target.value.split(" - ")[0]),away:parseInt(n.target.value.split(" - ")[1])}}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Статус"}),e.jsxs($e,{value:p.status,onValueChange:n=>g(v(f({},p),{status:n})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Выберите статус"})}),e.jsxs(Le,{children:[e.jsx(ie,{value:"scheduled",children:"Запланирован"}),e.jsx(ie,{value:"live",children:"В прямом эфире"}),e.jsx(ie,{value:"completed",children:"Завершен"}),e.jsx(ie,{value:"cancelled",children:"Отменен"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(pe,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Отмена"}),e.jsx(pe,{type:"submit",children:c?"Сохранить":"Создать"})]})]})]})]})]}),e.jsxs(Mt,{children:[e.jsx(At,{children:e.jsxs(ke,{children:[e.jsx(Y,{children:"Дата"}),e.jsx(Y,{children:"Время"}),e.jsx(Y,{children:"Соперник"}),e.jsx(Y,{children:"Место"}),e.jsx(Y,{children:"Счет"}),e.jsx(Y,{children:"Статус"}),e.jsx(Y,{children:"Действия"})]})}),e.jsx(Ot,{children:s.map(n=>e.jsxs(ke,{children:[e.jsx(q,{children:new Date(n.date).toLocaleDateString()}),e.jsx(q,{children:n.time}),e.jsx(q,{children:n.opponent}),e.jsx(q,{children:n.venue}),e.jsx(q,{children:`${n.score.home} - ${n.score.away}`}),e.jsx(q,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.status==="completed"?"bg-green-100 text-green-800":n.status==="live"?"bg-red-100 text-red-800":n.status==="cancelled"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:n.status==="completed"?"Завершен":n.status==="live"?"В прямом эфире":n.status==="cancelled"?"Отменен":"Запланирован"})}),e.jsx(q,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>P(n),children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>b(n.id),children:e.jsx(eo,{className:"w-4 h-4"})})]})})]},n.id))})]})]})};export{ns as default};
//# sourceMappingURL=MatchesManagement.js.map
