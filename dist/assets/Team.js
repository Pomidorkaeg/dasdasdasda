var h=(a,o,r)=>new Promise((n,t)=>{var i=c=>{try{m(r.next(c))}catch(x){t(x)}},d=c=>{try{m(r.throw(c))}catch(x){t(x)}},m=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,d);m((r=r.apply(a,o)).next())});import{j as e}from"./ui-vendor.js";import{R as y,r as l}from"./react-vendor.js";import{d as p}from"./db.js";import{B as f}from"./button.js";import{C,a as w,b as T,c as S}from"./card.js";import{N as D,F as E}from"./Footer.js";import"./api2.js";import"./index.js";import"./query.js";const F=({player:a,primaryColor:o})=>{var r,n,t,i,d;return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-[3/4]",children:[e.jsx("img",{src:a.photo,alt:a.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(to bottom, transparent 50%, ${o})`,opacity:.8}}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[e.jsx("h3",{className:"text-white text-lg font-bold",children:a.name}),e.jsx("p",{className:"text-white/80 text-sm",children:a.position})]})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-5 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Игры"}),e.jsx("p",{className:"font-semibold",children:((r=a.stats)==null?void 0:r.games)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Голы"}),e.jsx("p",{className:"font-semibold",children:((n=a.stats)==null?void 0:n.goals)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Передачи"}),e.jsx("p",{className:"font-semibold",children:((t=a.stats)==null?void 0:t.assists)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"ЖК"}),e.jsx("p",{className:"font-semibold",children:((i=a.stats)==null?void 0:i.yellowCards)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"КК"}),e.jsx("p",{className:"font-semibold",children:((d=a.stats)==null?void 0:d.redCards)||0})]})]})})]})},u=y.memo(()=>{const[a,o]=l.useState([]),[r,n]=l.useState(!0),[t,i]=l.useState(null),[d,m]=l.useState([]),[c,x]=l.useState([]),[P,_]=l.useState(!1),[k,R]=l.useState(null),[B,I]=l.useState({name:"",team_id:"",photo:"",nationality:"",age:"",experience:"",achievements:""});l.useEffect(()=>{N(),b()},[]);const N=()=>h(void 0,null,function*(){try{n(!0);const s=yield p.getTeams();m(s);const g=yield p.getPlayers();o(g)}catch(s){console.error("Error loading data:",s)}finally{n(!1)}}),b=()=>h(void 0,null,function*(){const s=yield p.getCoaches();x(s)}),j=t?a.filter(s=>s.team_id===t):a;return r?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(C,{children:[e.jsx(w,{children:e.jsx(T,{children:"Команда"})}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx(f,{variant:t===null?"default":"outline",onClick:()=>i(null),children:"Все команды"}),d.map(s=>e.jsx(f,{variant:t===s.id?"default":"outline",onClick:()=>i(s.id),children:s.name},s.id))]}),j.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"Нет данных"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:j.map(s=>{var g;return e.jsx(F,{player:s,primaryColor:((g=d.find(v=>v.id===s.team_id))==null?void 0:g.primaryColor)||"#222"},s.id)})}),e.jsxs("div",{className:"my-12 border-t border-gray-200 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Тренеры"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:c.filter(s=>!t||s.team_id===t).length===0?e.jsx("div",{className:"text-center py-12 col-span-full",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"Нет тренеров"})}):c.filter(s=>!t||s.team_id===t).map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center",children:[s.photo&&e.jsx("img",{src:s.photo,alt:s.name,className:"w-24 h-24 rounded-full object-cover mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-1",children:s.name}),e.jsx("p",{className:"text-gray-500 text-sm mb-2",children:s.nationality}),e.jsxs("p",{className:"text-gray-500 text-sm mb-2",children:["Возраст: ",s.age||"-"]}),e.jsxs("p",{className:"text-gray-500 text-sm mb-2",children:["Опыт: ",s.experience||"-"," лет"]}),s.achievements&&e.jsx("p",{className:"text-gray-700 text-xs mb-2",children:s.achievements})]},s.id))})]})]})]})})});u.displayName="Team";const K=()=>{const[a,o]=l.useState("gudauta"),[r,n]=l.useState(null);return l.useEffect(()=>{h(void 0,null,function*(){try{const i=yield p.getTeams()}catch(i){console.error("Error loading teams:",i)}})},[]),l.useEffect(()=>{h(void 0,null,function*(){a&&console.log(`Fetching data for team: ${a}`)})},[a]),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(D,{}),e.jsx("main",{className:"flex-grow pt-16 page-transition",children:e.jsx("div",{className:"py-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:e.jsx(u,{})})}),e.jsx(E,{})]})};export{K as default};
//# sourceMappingURL=Team.js.map
